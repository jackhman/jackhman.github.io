import{_ as n,F as t,g as l,K as p,h as s,ar as h,l as i,o as e}from"./chunks/framework.VlluEs-f.js";const x=JSON.parse('{"title":"15文件包含：不受限地引入文件可能导致网站被入侵","description":"","frontmatter":{},"headers":[],"relativePath":"posts/devops/Web 安全攻防之道_文档/(5983) 15  文件包含：不受限地引入文件可能导致网站被入侵.md","filePath":"posts/devops/Web 安全攻防之道_文档/(5983) 15  文件包含：不受限地引入文件可能导致网站被入侵.md","lastUpdated":1718371218000}'),k={name:"posts/devops/Web 安全攻防之道_文档/(5983) 15  文件包含：不受限地引入文件可能导致网站被入侵.md"},r=h("",12),d=h("",6),E=h("",6),g=h("",21),o=i("p",null,"图 4 利用漏洞读取 /etc/passwd 文件",-1),c=i("h3",{id:"漏洞利用技巧",tabindex:"-1"},[s("漏洞利用技巧 "),i("a",{class:"header-anchor",href:"#漏洞利用技巧","aria-label":'Permalink to "漏洞利用技巧"'},"​")],-1),y=i("p",null,"随着PHP 5.2 之后默认关闭 allow_url_include 配置，也降低了远程文件包含漏洞的出现。但是本地文件包含漏洞的利用方式，很多也适用于远程文件包含漏洞，下面会介绍一些相对通用的利用技巧。",-1),F=i("p",null,"此处漏洞利用的目标仍然是为了获取服务器的 shell 权限，就需要设法在服务器上写入文件，内容自然是一句话等恶意代码内容。但是，我们手上又没有写任意文件的漏洞可利用，只能看看服务器上哪些文件会写入外部用户可控数据，或者其他可执行 PHP 代码的方式。",-1),u=i("p",null,"总结起来，主要有下面几种利用方式。",-1),_=i("h4",{id:"_1-写日志文件",tabindex:"-1"},[s("1.写日志文件 "),i("a",{class:"header-anchor",href:"#_1-写日志文件","aria-label":'Permalink to "1.写日志文件"'},"​")],-1),C=i("p",null,"如果服务器开启访问日志记录的话，那么用户的请求数据就会被记录在日志文件，若我们在地址上包含一句话木马的话，也同样会被记录进去。如果将一句话写在 URL 中常常会被 URL 编码存储，因此需要写 User-Agent 中，其他 HTTP 头默认不会被记录：",-1),A=h("",17),m=h("",11),b=i("p",null,"此处我直接利用 data:// 执行代码，这比远程文件包含中利用方式便捷太多了，比如下面直接系统命令的示例。",-1),v=h("",15),B=h("",20);function D(f,P,q,$,S,T){const a=t("Image");return e(),l("div",null,[r,p(a,{alt:"图片1.png",src:"https://s0.lgstatic.com/i/image2/M01/0C/3C/Cip5yGAX4A2AGQJLAALnh3QheXo648.png"}),s(),d,p(a,{alt:"图片2.png",src:"https://s0.lgstatic.com/i/image/M00/94/50/CgqCHmAX4CWALTY8AAQPl3E0Ay4160.png"}),s(),E,p(a,{alt:"图片3.png",src:"https://s0.lgstatic.com/i/image/M00/94/50/CgqCHmAX4DSAJYH3AAQINnkRH5s611.png"}),s(),g,p(a,{alt:"图片4.png",src:"https://s0.lgstatic.com/i/image2/M01/0C/3C/Cip5yGAX4EmATdfwAAIXYjl0obE125.png"}),s(),o,c,y,F,u,_,C,p(a,{alt:"图片5.png",src:"https://s0.lgstatic.com/i/image/M00/94/45/Ciqc1GAX4FmADM5PAASEhBTUaiw277.png"}),s(),A,p(a,{alt:"图片6.png",src:"https://s0.lgstatic.com/i/image/M00/94/50/CgqCHmAX4HOAWgwcAADxpVOzpUc744.png"}),s(),m,p(a,{alt:"图片8.png",src:"https://s0.lgstatic.com/i/image2/M01/0C/3D/Cip5yGAX4KSAapyBAAPVaA5QE1A158.png"}),s(),b,p(a,{alt:"图片7.png",src:"https://s0.lgstatic.com/i/image2/M01/0C/3D/Cip5yGAX4LqAHITdAAFk7HY8mf8051.png"}),s(),v,p(a,{alt:"图片9.png",src:"https://s0.lgstatic.com/i/image/M00/94/51/CgqCHmAX4MqASFfNAAFRLvvVLVE597.png"}),s(),B])}const H=n(k,[["render",D]]);export{x as __pageData,H as default};
