import{_ as l,F as h,g as t,K as a,h as n,ar as p,l as s,o as k}from"./chunks/framework.VlluEs-f.js";const w=JSON.parse('{"title":"04构造复杂的程序：将一个递归函数转成非递归函数的通用方法","description":"","frontmatter":{},"headers":[],"relativePath":"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md","filePath":"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md","lastUpdated":1718371218000}'),e={name:"posts/backEnd/重学操作系统_文档/(4609) 04  构造复杂的程序：将一个递归函数转成非递归函数的通用方法.md"},d=p("",39),E=s("p",null,"函数执行过程中，先将执行结果写入栈中，然后在返回前把之前压入的参数出栈，调用方再从栈中取出执行结果。",-1),r=s("p",null,"将参数传递给 Stack 的过程，叫作压栈。取出结果的过程，叫作出栈。栈就好像你书桌上的一摞书，压栈就是把参数放到书上面，出栈就是把顶部的书拿下来。",-1),g=s("p",null,"因为栈中的每个数据大小都一样，所以在函数执行的过程中，我们可以通过参数的个数和参数的序号去计算参数在栈中的位置。",-1),c=s("p",null,"接下来我们来看看函数执行的整体过程：假设要计算 11 和 15 的和，我们首先在内存中开辟一块单独的空间，也就是栈。",-1),o=p("",9),y=s("ul",null,[s("li",null,[s("strong",null,"压栈参数15")])],-1),F=s("p",null,"然后我们用同样的方法将参数 15 压栈。",-1),C=s("p",null,"压栈后，11 和 15 都被放入了对应的内存位置，并且栈指针指向了 0x108。",-1),u=s("ul",null,[s("li",null,[s("strong",null,"将返回值压栈")])],-1),_=s("p",null,"接下来，我们将返回值压栈。到这里你可能会问，返回值还没有计算呢，怎么就压栈了？其实这相当于一个占位，后面我们会改写这个地址。",-1),A=p("",12),b=s("ul",null,[s("li",null,[s("strong",null,"发现-解决问题")])],-1),m=s("p",null,"一个好的解决方案，也会面临问题。现在我们就遇到了麻烦：",-1),D=s("ol",null,[s("li",null,[s("p",null,"函数计算完成，这时应该跳转回去。可是我们没有记录函数调用前 PC 指针的位置，因此这里需要改进，我们需要存储函数调用前的 PC 指针方便调用后恢复。")]),s("li",null,[s("p",null,"栈不可以被无限使用，11和 15 作为参数，计算出了结果 26，那么它们就可以清空了。如果用调整栈指针的方式去清空，我们就会先清空 26。此时就会出现顺序问题，因此我们需要调整压栈的顺序。")])],-1),B=s("p",null,"具体顺序你可以看下图。首先，我们将函数参数和返回值换位，这样在清空数据的时候，就会先清空参数，再清空返回值。",-1),v=p("",7),P=s("p",null,"比如执行 sum(100)，我们就会形成一个复杂的栈，第一次调用 n = 100，第二次递归调用 n = 99：",-1),S=s("p",null,"它们堆在了一起，就形成了一个很大的栈，简化一下就是这样的一个模型，如下所示：",-1),j=p("",10),R=p("",16);function f(T,q,x,I,M,V){const i=h("Image");return k(),t("div",null,[d,a(i,{alt:"Lark20200916-181251.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5mWAGqrjAABpcF79u8M632.png"}),n(),E,a(i,{alt:"Lark20200916-181255.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5m2ALcHaAABs3s6zJkQ202.png"}),n(),r,g,c,a(i,{alt:"Drawing 2.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5nWAFY-ZAAAwk_1T41E731.png"}),n(),o,a(i,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5n-APEFtAAAy3ahEVnE846.png"}),n(),y,F,a(i,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5oWAejVOAAA-DX72fJI426.png"}),n(),C,u,_,a(i,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/50/31/CgqCHl9h5o2ARmc3AABEUYqLaKo705.png"}),n(),A,a(i,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5pWAQ-8nAABHqkFWy4k580.png"}),n(),b,m,D,B,a(i,{alt:"Lark20201225-140329.png",src:"https://s0.lgstatic.com/i/image/M00/8C/1E/CgqCHl_lhT6AP75kAAD-cUrMUNg773.png"}),n(),v,a(i,{alt:"Lark20201225-140329.png",src:"https://s0.lgstatic.com/i/image/M00/8C/1E/CgqCHl_lhQKAIVTlAAD-cUrMUNg043.png"}),n(),P,a(i,{alt:"1.png",src:"https://s0.lgstatic.com/i/image/M00/51/2C/CgqCHl9kbw6AEGmQAADNH1dIS2Q053.png"}),n(),S,a(i,{alt:"2.png",src:"https://s0.lgstatic.com/i/image/M00/51/21/Ciqc1F9kcBCAalP8AACq_zc_LfM551.png"}),n(),j,a(i,{alt:"Lark20200916-181235.png",src:"https://s0.lgstatic.com/i/image/M00/50/25/Ciqc1F9h5rmANakFAACFALCOZaU910.png"}),n(),R])}const N=l(e,[["render",f]]);export{w as __pageData,N as default};
