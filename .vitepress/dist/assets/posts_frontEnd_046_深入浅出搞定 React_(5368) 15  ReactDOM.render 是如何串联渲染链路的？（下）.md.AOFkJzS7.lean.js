import{_ as p,F as l,g as e,K as n,h as s,ar as t,l as i,o as k}from"./chunks/framework.VlluEs-f.js";const U=JSON.parse('{"title":"15ReactDOM.render是如何串联渲染链路的？（下）","description":"","frontmatter":{},"headers":[],"relativePath":"posts/frontEnd/046_深入浅出搞定 React/(5368) 15  ReactDOM.render 是如何串联渲染链路的？（下）.md","filePath":"posts/frontEnd/046_深入浅出搞定 React/(5368) 15  ReactDOM.render 是如何串联渲染链路的？（下）.md","lastUpdated":1718371218000}'),h={name:"posts/frontEnd/046_深入浅出搞定 React/(5368) 15  ReactDOM.render 是如何串联渲染链路的？（下）.md"},r=t("",7),o=i("p",null,"从图上我们需要把握住的一个信息是，从 performUnitOfWork 到 completeWork，中间会经过一个这样的调用链路：",-1),E=t("",4),g=i("p",null,"显然，第一个进入 completeWork 的节点是 h1，这也符合我们上一讲所构建出来的 Fiber 树中的节点关系，如下图所示：",-1),d=t("",6),c=t("",8),y=t("",14),F=t("",6),A=i("p",null,"那么我们递归的目的是什么呢？或者说，render 阶段的工作目标是什么呢？",-1),D=i("p",null,[i("strong",null,"render 阶段的工作目标是找出界面中需要处理的更新"),s("。")],-1),f=i("p",null,"在实际的操作中，并不是所有的节点上都会产生需要处理的更新。比如在挂载阶段，对图中的整棵 workInProgress 递归完毕后，React 会发现实际只需要对 App 节点执行一个挂载操作就可以了；而在更新阶段，这种现象更为明显。",-1),u=i("p",null,"更新阶段与挂载阶段的主要区别在于更新阶段的 current 树不为空，比如说情况可以是下图这样子的：",-1),m=t("",10),_=t("",7),C=i("p",null,"OK，读到这里，相信你已经对 effectList 的创建过程知根知底了。",-1),b=i("p",null,'现在，即便你对部分源码细节的消化可能没有那么快，也请你不要因为这些细节去中断自己串联整个渲染链路的思路。你只需要把握住"根节点（rootFiber）上的 effectList 信息，是 commit 阶段的更新线索"这个结论，就足以将 render 阶段和 commit 阶段串联起来。',-1),q=i("h3",{id:"commit-阶段工作流简析",tabindex:"-1"},[s("commit 阶段工作流简析 "),i("a",{class:"header-anchor",href:"#commit-阶段工作流简析","aria-label":'Permalink to "commit 阶段工作流简析"'},"​")],-1),W=i("p",null,'在整个 ReactDOM.render 的渲染链路中，render 阶段是 Fiber 架构的核心体现，也是我们讲解的重点。对于 render 阶段，我对你的期望是"熟悉"，为了达成这个目标，我们对 render 阶段的学习还会再持续一个课时；而对于 commit 阶段，我只要求你做到"了解"。因此这里我会快速地带你过一遍 commit 阶段的重点知识，不占用你太多时间。',-1),O=i("p",null,"commit 会在 performSyncWorkOnRoot 中被调用，如下图所示：",-1),P=t("",8);function w(I,M,T,v,B,L){const a=l("Image");return k(),e("div",null,[r,n(a,{alt:"Drawing 0.png",src:"https://s0.lgstatic.com/i/image/M00/72/1B/CgqCHl_AsdSAQuGuAAC09U5X0K0556.png"}),s(),o,n(a,{alt:"图片10.png",src:"https://s0.lgstatic.com/i/image/M00/72/29/CgqCHl_A2PuADu50AABVUspw4O0014.png"}),s(),E,n(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/72/10/Ciqc1F_AseOADKNDAALdERWik0M525.png"}),s(),g,n(a,{alt:"Drawing 3.png",src:"https://s0.lgstatic.com/i/image/M00/72/1B/CgqCHl_AsgSAJoM0AAEYVWI-PXg056.png"}),s(),d,n(a,{alt:"图片12.png",src:"https://s0.lgstatic.com/i/image/M00/72/29/CgqCHl_A2R-AWalhAAD-42SivEU001.png"}),s(),c,n(a,{alt:"Drawing 5.png",src:"https://s0.lgstatic.com/i/image/M00/72/10/Ciqc1F_Ash-AW32XAABIXg8drFo176.png"}),s(),y,n(a,{alt:"图片8.png",src:"https://s0.lgstatic.com/i/image/M00/72/29/CgqCHl_A2UCAeC8WAAByZUWVwpM770.png"}),s(),F,n(a,{alt:"图片13.png",src:"https://s0.lgstatic.com/i/image/M00/72/29/CgqCHl_A2VCAHbHdAAEBwCIJFE4253.png"}),s(),A,D,f,u,n(a,{alt:"图片14.png",src:"https://s0.lgstatic.com/i/image/M00/72/29/CgqCHl_A2VyAUxeJAAIrypFDLh4388.png"}),s(),m,n(a,{alt:"Drawing 10.png",src:"https://s0.lgstatic.com/i/image/M00/72/1C/CgqCHl_AspmALRFDAADaKY8wTqc180.png"}),s(),_,n(a,{alt:"图片15.png",src:"https://s0.lgstatic.com/i/image/M00/72/1E/Ciqc1F_A2W-AVmmRAABDdji0MoI238.png"}),s(),C,b,q,W,O,n(a,{alt:"Drawing 12.png",src:"https://s0.lgstatic.com/i/image/M00/72/10/Ciqc1F_AsqiAENXWAAF6r2_37Lc521.png"}),s(),P])}const S=p(h,[["render",w]]);export{U as __pageData,S as default};
