import{_ as n,F as p,g as h,K as t,h as i,ar as l,l as s,o as e}from"./chunks/framework.VlluEs-f.js";const W=JSON.parse('{"title":"10SSRF漏洞：外网隔离就绝对安全了吗？","description":"","frontmatter":{},"headers":[],"relativePath":"posts/devops/Web 安全攻防之道_文档/(5978) 10  SSRF 漏洞：外网隔离就绝对安全了吗？.md","filePath":"posts/devops/Web 安全攻防之道_文档/(5978) 10  SSRF 漏洞：外网隔离就绝对安全了吗？.md","lastUpdated":1718371218000}'),k={name:"posts/devops/Web 安全攻防之道_文档/(5978) 10  SSRF 漏洞：外网隔离就绝对安全了吗？.md"},r=l("",8),o=l("",4),g=l("",4),d=l("",12),E=s("p",null,"图 4：常用于 SSRF 的 URL Scheme",-1),c=s("p",null,[i("在利用初期，你可以尝试下目标支持哪些 URL Schema，但有一点需要提醒下："),s("strong",null,"有些应用会自定义一些 URL Schema，如果它支持本地或网络地址请求，要注意避免遗漏掉"),i("。")],-1),F=s("h4",{id:"_2-读取本地文件",tabindex:"-1"},[i("2.读取本地文件 "),s("a",{class:"header-anchor",href:"#_2-读取本地文件","aria-label":'Permalink to "2.读取本地文件"'},"​")],-1),y=s("p",null,"从图 4 可以看到，除了 http/https 协议外，File 也是各场景通用的伪协议，利用它我们可以读取服务器的本地文件，比如 /etc/passwd、/proc/self/environ......",-1),_=l("",19),S=l("",11),u=s("p",null,"图 7：BurpSuite 默认提供 Collaborator Server 作为 DNS 解析服务器",-1),A=s("p",null,"关于 Burp Collaborator 原理，我们可以看下面这张图：",-1),C=s("p",null,"图 8：Burp Collaborator 原理",-1),D=s("p",null,"图中可以看到，先利用 SSRF 漏洞让目标应用向 Burp 提供的 DNS 解析服务器 Burp Collaborator Server 发起请求，然后 Burp Collaborator Server 会查询对应的 DNS 请求记录并返回给 BurpSuite，从而帮助测试者判断 SSRF 漏洞是否存在。",-1),b=s("p",null,"仍以前面的靶场题目为例，打开 Burp Collaborator Client：",-1),m=s("p",null,'图 9：选择菜单"Burp Collaborator client"',-1),R=l("",4),f=s("p",null,"图 11：获得 DNS 请求日志证明存在 SSRF 漏洞",-1),v=s("p",null,"这个检测方法比较通用简单，且无须自己搭建 DNS 服务器，非常方便，我强烈推荐。",-1),B=s("h4",{id:"_2-工具-ssrfmap",tabindex:"-1"},[i("2.工具：SSRFmap "),s("a",{class:"header-anchor",href:"#_2-工具-ssrfmap","aria-label":'Permalink to "2.工具：SSRFmap"'},"​")],-1),T=s("p",null,[i("这里给大家介绍一款 SSRF 检测工具："),s("a",{href:"https://github.com/swisskyrepo/SSRFmap",target:"_blank",rel:"noreferrer"},"SSRFmap"),i("，利用它可检测与利用 SSRF 漏洞， 同时它也整合了一些常用漏洞可以结合 SSRF 去利用，比如 fastjson、mysql、github 的一些历史漏洞，还有端口扫描、读取文件等利用功能，都是实用的漏洞利用能力。")],-1),P=s("p",null,"使用上会比 Burp Collaborator 便捷，但检测能力上其实没有 Burp Collaborator 那样准确，SSRFmap 有时会利用失败。所以个人推荐使用 Burp Collaborator 用来检测 SSRF 是否存在，再使用 SSRFmap 做一些漏洞利用，比如读取敏感文件等操作。",-1),x=s("p",null,"SSRFmap 是以 HTTP 请求数据作为文件输入，使用命令如下：",-1),q=l("",6),L=l("",22),w=s("p",null,"图 14：SSRF Search & Destory",-1),I=s("p",null,[i("最后我要推荐一篇文章"),s("a",{href:"https://www.sohu.com/a/440098632_99907709",target:"_blank",rel:"noreferrer"},"《SSRF 引发的血案》"),i("，通过信息收集、SSRF 漏洞、旁站路径泄露，最终获取目标网站的 root shell。这篇文章很有实战参考意义，既体现出了信息收集的重要性，又表明了 SSRF 的危害。")],-1),N=s("p",null,"在 SSRF 漏洞的检测和防御中，如果你遇到了什么问题，欢迎在评论区留言。",-1),j=s("p",null,"下一讲，我将带你了解 XXE 漏洞，它是一种帮助计算机理解信息符号并处理各种信息的语言，主要用来传递结构化的数据信息。",-1);function X(M,U,$,V,O,H){const a=p("Image");return e(),h("div",null,[r,t(a,{alt:"图片1.png",src:"https://s0.lgstatic.com/i/image2/M01/05/7E/CgpVE2AADgaALnqEAAU0JhFZzR0654.png"}),i(),o,t(a,{alt:"Drawing 1.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___H-AGVMFAACkzV98r_I798.png"}),i(),g,t(a,{alt:"图片3.png",src:"https://s0.lgstatic.com/i/image2/M01/05/7C/Cip5yGAADhCAWSnNAAdaKZQ9ykM424.png"}),i(),d,t(a,{alt:"图片4.png",src:"https://s0.lgstatic.com/i/image/M00/8D/9D/CgqCHmAADh6AFbrRAAIMts5NwrM049.png"}),i(),E,c,F,y,t(a,{alt:"Drawing 4.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___JyAXxb8AAFuJktUmQY503.png"}),i(),_,t(a,{alt:"图片6.png",src:"https://s0.lgstatic.com/i/image/M00/8D/9D/CgqCHmAADkGAIcZZAAMGZOUjpvY507.png"}),i(),S,t(a,{alt:"Drawing 6.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___M6AM-F0AAB4EJZT7Og734.png"}),i(),u,A,t(a,{alt:"Drawing 7.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___NaAO7ZxAABr-AfFp10030.png"}),i(),C,D,b,t(a,{alt:"图片9.png",src:"https://s0.lgstatic.com/i/image2/M01/05/7C/Cip5yGAADl-ANvjXAALr6lgnhiU452.png"}),i(),m,t(a,{alt:"Drawing 9.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___OaARRUKAAA1N0CwrBA260.png"}),i(),R,t(a,{alt:"Drawing 10.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___PCAJA70AABnCpr9zFk818.png"}),i(),f,v,B,T,P,x,t(a,{alt:"Drawing 11.png",src:"https://s0.lgstatic.com/i/image/M00/8D/8C/Ciqc1F___PiASgPlAAEZ_x3Bz0k961.png"}),i(),q,t(a,{alt:"Drawing 12.png",src:"https://s0.lgstatic.com/i/image/M00/8D/98/CgqCHl___QOAXop9AAFeL92aWyk084.png"}),i(),L,t(a,{alt:"图片14.png",src:"https://s0.lgstatic.com/i/image/M00/8D/9D/CgqCHmAADwWABCT2AAiRZWxBE54491.png"}),i(),w,I,N,j,t(a,{alt:"web安全10金句.png",src:"https://s0.lgstatic.com/i/image/M00/8D/9D/CgqCHmAADyOAB9URAAVCqo4Bquk815.png"})])}const z=n(k,[["render",X]]);export{W as __pageData,z as default};
